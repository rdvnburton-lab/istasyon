<p-toast></p-toast>
<p-confirmDialog></p-confirmDialog>

<div class="grid grid-cols-12 gap-6">
    <ng-container *ngIf="!seciliMarketVardiya">
        <!-- Üst: Yeni Gün Açma -->
        <div class="col-span-12">
            <div class="card">
                <h5 class="font-semibold mb-4 flex items-center">
                    <i class="pi pi-calendar-plus mr-2 text-primary-500"></i>
                    Yeni Günlük Vardiya Aç
                </h5>
                <div class="flex items-end gap-4">
                    <div class="flex flex-col gap-2 w-full md:w-1/3">
                        <label class="font-semibold">Tarih</label>
                        <p-datepicker [(ngModel)]="yeniVardiyaForm.tarih" dateFormat="dd.mm.yy" [showIcon]="true"
                            iconDisplay="input" styleClass="w-full">
                        </p-datepicker>
                    </div>

                    <div class="w-full md:w-auto">
                        <p-button label="Günlüğü Başlat" icon="pi pi-check" (onClick)="yeniVardiyaEkle()"
                            styleClass="w-full md:w-auto">
                        </p-button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Orta: Günlük Vardiya Listesi -->
        <div class="col-span-12">
            <div class="card">
                <h5 class="font-semibold mb-4 flex items-center">
                    <i class="pi pi-list mr-2 text-blue-500"></i>
                    Market Günlük Vardiya Listesi
                </h5>

                <p-table [value]="marketVardiyalar" styleClass="p-datatable-gridlines p-datatable-sm" [rowHover]="true">
                    <ng-template pTemplate="header">
                        <tr>
                            <th style="width: 120px">Tarih</th>
                            <th class="text-right">Top. Sistem Satış</th>
                            <th class="text-right">Top. Teslimat</th>
                            <th class="text-right">Günlük Fark</th>
                            <th style="width: 100px">Durum</th>
                            <th style="width: 120px">İşlem</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-vardiya>
                        <tr [ngClass]="{'bg-blue-50 dark:bg-blue-900/20': isVardiyaSecili(vardiya)}">
                            <td>{{ vardiya.tarih | date:'dd.MM.yyyy' }}</td>
                            <td class="text-right font-semibold">{{ vardiya.toplamSatisTutari |
                                currency:'TRY':'symbol-narrow':'1.2-2':'tr' }}</td>
                            <td class="text-right text-green-600 font-semibold">{{ vardiya.toplamTeslimatTutari |
                                currency:'TRY':'symbol-narrow':'1.2-2':'tr' }}</td>
                            <td class="text-right font-bold"
                                [ngClass]="{'text-red-500': (vardiya.toplamFark || 0) < 0, 'text-blue-500': (vardiya.toplamFark || 0) > 0}">
                                {{ vardiya.toplamFark | currency:'TRY':'symbol-narrow':'1.2-2':'tr' }}
                            </td>
                            <td>
                                <p-tag *ngIf="vardiya.durum === 'ACIK'" value="Açık" severity="success"></p-tag>
                                <p-tag *ngIf="vardiya.durum === 'TAMAMLANDI'" value="Tamamlandı"
                                    severity="secondary"></p-tag>
                                <p-tag *ngIf="vardiya.durum === 'ONAY_BEKLIYOR'" value="Onay Bekliyor" severity="warn"
                                    icon="pi pi-spinner pi-spin"></p-tag>
                                <p-tag *ngIf="vardiya.durum === 'ONAYLANDI'" value="Onaylandı" severity="info"
                                    icon="pi pi-check-circle"></p-tag>
                                <p-tag *ngIf="vardiya.durum === 'REDDEDILDI'" value="Reddedildi" severity="danger"
                                    icon="pi pi-times-circle" [pTooltip]="vardiya.redNedeni"
                                    tooltipPosition="top"></p-tag>
                            </td>
                            <td>
                                <div class="flex gap-2">
                                    <p-button label="İşlem Yap" icon="pi pi-pencil" size="small"
                                        [outlined]="!isVardiyaSecili(vardiya)" (onClick)="vardiyaSec(vardiya)">
                                    </p-button>
                                    <p-button icon="pi pi-file" size="small" severity="warn" tooltipPosition="top"
                                        pTooltip="Z Raporu Ekle/Gör" (onClick)="zRaporuDialogAc(vardiya)">
                                    </p-button>
                                    <p-button *ngIf="vardiya.durum === 'ACIK' || vardiya.durum === 'REDDEDILDI'"
                                        icon="pi pi-send" size="small" severity="help" tooltipPosition="top"
                                        pTooltip="Onaya Gönder" (onClick)="mutabakatGonder(vardiya)">
                                    </p-button>
                                </div>
                            </td>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="emptymessage">
                        <tr>
                            <td colspan="6" class="text-center py-4 text-surface-500">
                                Henüz kayıtlı gün yok. Yukarıdan yeni kayıt oluşturabilirsiniz.
                            </td>
                        </tr>
                    </ng-template>
                </p-table>
            </div>
        </div>
    </ng-container>

    <!-- Alt: Detay ve Personel Girişleri -->
    <ng-container *ngIf="seciliMarketVardiya">
        <div id="detay-formu" class="col-span-12">
            <div class="grid grid-cols-12 gap-6">

                <!-- Başlık -->
                <div class="col-span-12">
                    <div
                        class="flex items-center gap-3 p-4 bg-surface-100 dark:bg-surface-800 rounded-xl border border-surface-200 dark:border-surface-700">

                        <p-button icon="pi pi-arrow-left" [text]="true" [rounded]="true" severity="secondary"
                            pTooltip="Listeye Dön" tooltipPosition="bottom" (onClick)="listeyeDon()">
                        </p-button>
                        <div class="h-8 w-px bg-surface-300 dark:bg-surface-600 mx-1"></div>

                        <i class="pi pi-calendar text-2xl text-primary-500"></i>
                        <div>
                            <h3 class="text-lg font-bold m-0 my-5">
                                {{ seciliMarketVardiya.tarih | date:'dd.MM.yyyy' }} - Personel İşlemleri
                            </h3>
                            <span class="text-surface-500 text-sm">
                                Market Personel Satış ve Teslimat Girişi
                            </span>
                        </div>
                    </div>
                </div>

                <!-- Sol: Personel Listesi -->
                <div class="col-span-12 lg:col-span-7">
                    <div class="card">
                        <h5 class="font-semibold mb-4 text-blue-600">
                            <i class="pi pi-users mr-2"></i> Vardiya Personel Listesi
                        </h5>

                        <p-table [value]="yonetilenPersoneller" styleClass="p-datatable-sm" [rowHover]="true">
                            <ng-template pTemplate="header">
                                <tr>
                                    <th>Personel</th>
                                    <th class="text-right">Sistem Satış</th>
                                    <th class="text-right">Teslimat</th>
                                    <th class="text-right">Fark</th>
                                    <th style="width: 50px"></th>
                                </tr>
                            </ng-template>
                            <ng-template pTemplate="body" let-personel>
                                <tr>
                                    <td class="font-medium">{{ personel.personelAdi }}</td>
                                    <td class="text-right">{{ personel.sistemSatisTutari |
                                        currency:'TRY':'symbol-narrow':'1.2-2':'tr' }}</td>
                                    <td class="text-right text-green-600">{{ personel.toplamTeslimat |
                                        currency:'TRY':'symbol-narrow':'1.2-2':'tr' }}</td>
                                    <td class="text-right font-bold"
                                        [ngClass]="{'text-red-500': personel.fark < 0, 'text-blue-500': personel.fark > 0}">
                                        {{ personel.fark | currency:'TRY':'symbol-narrow':'1.2-2':'tr' }}
                                    </td>
                                    <td>
                                        <p-button icon="pi pi-pencil" [text]="true" severity="secondary"
                                            (onClick)="personelDuzenle(personel)">
                                        </p-button>
                                    </td>
                                </tr>
                            </ng-template>
                            <ng-template pTemplate="emptymessage">
                                <tr>
                                    <td colspan="5" class="text-center py-4 text-surface-500">
                                        Henüz personel verisi girilmemiş.
                                    </td>
                                </tr>
                            </ng-template>
                            <ng-template pTemplate="footer">
                                <tr class="bg-surface-50 font-bold">
                                    <td>TOPLAM</td>
                                    <td class="text-right">{{ seciliMarketVardiya.toplamSatisTutari |
                                        currency:'TRY':'symbol-narrow':'1.2-2':'tr' }}</td>
                                    <td class="text-right text-green-600">{{
                                        seciliMarketVardiya.toplamTeslimatTutari |
                                        currency:'TRY':'symbol-narrow':'1.2-2':'tr' }}</td>
                                    <td class="text-right"
                                        [ngClass]="{'text-red-500': (seciliMarketVardiya.toplamFark||0) < 0}">
                                        {{ seciliMarketVardiya.toplamFark |
                                        currency:'TRY':'symbol-narrow':'1.2-2':'tr'
                                        }}
                                    </td>
                                    <td></td>
                                </tr>
                            </ng-template>
                        </p-table>
                    </div>



                    <!-- Market Giderleri -->
                    <!-- Gider ve Gelirler -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                        <!-- Market Giderleri -->
                        <div
                            class="card h-full bg-orange-50 dark:bg-orange-900/10 border-orange-100 dark:border-orange-900/30 border">
                            <div class="flex justify-between items-center mb-4">
                                <h5 class="font-semibold m-0 flex items-center text-orange-700 dark:text-orange-300">
                                    <i class="pi pi-shopping-cart mr-2"></i>Giderler
                                </h5>
                                <div class="flex items-center gap-2">
                                    <span class="font-bold text-orange-600 text-sm" *ngIf="giderler.length > 0">
                                        {{ getGiderToplam() | currency:'TRY':'symbol-narrow':'1.2-2':'tr' }}
                                    </span>
                                    <p-button icon="pi pi-plus" severity="warn" size="small" [rounded]="true"
                                        [text]="true" (onClick)="giderDialogAc()">
                                    </p-button>
                                </div>
                            </div>

                            <p-table [value]="giderler" styleClass="p-datatable-sm bg-transparent" [rowHover]="true"
                                *ngIf="giderler.length > 0">
                                <ng-template pTemplate="body" let-gider>
                                    <tr class="text-xs">
                                        <td>
                                            <div class="font-medium text-surface-600">{{
                                                getGiderTuruLabel(gider.giderTuru)
                                                }}</div>
                                            <div class="text-surface-500 text-xs">{{ gider.aciklama }}</div>
                                        </td>
                                        <td class="text-right font-bold text-orange-600">
                                            {{ gider.tutar | currency:'TRY':'symbol-narrow':'1.2-2':'tr' }}
                                        </td>
                                        <td class="w-8 text-right">
                                            <p-button icon="pi pi-trash" severity="danger" size="small" [text]="true"
                                                [rounded]="true" (onClick)="giderSil(gider.id)">
                                            </p-button>
                                        </td>
                                    </tr>
                                </ng-template>
                            </p-table>

                            <div *ngIf="giderler.length === 0" class="text-center py-4 text-surface-500">
                                <p class="m-0 text-sm">Gider yok</p>
                            </div>
                        </div>

                        <!-- Market Gelirleri -->
                        <div
                            class="card h-full bg-green-50 dark:bg-green-900/10 border-green-100 dark:border-green-900/30 border">
                            <div class="flex justify-between items-center mb-4">
                                <h5 class="font-semibold m-0 flex items-center text-green-700 dark:text-green-300">
                                    <i class="pi pi-money-bill mr-2"></i>Gelirler
                                </h5>
                                <div class="flex items-center gap-2">
                                    <span class="font-bold text-green-600 text-sm" *ngIf="gelirler.length > 0">
                                        {{ getGelirToplam() | currency:'TRY':'symbol-narrow':'1.2-2':'tr' }}
                                    </span>
                                    <p-button icon="pi pi-plus" severity="success" size="small" [rounded]="true"
                                        [text]="true" (onClick)="gelirDialogAc()">
                                    </p-button>
                                </div>
                            </div>

                            <p-table [value]="gelirler" styleClass="p-datatable-sm bg-transparent" [rowHover]="true"
                                *ngIf="gelirler.length > 0">
                                <ng-template pTemplate="body" let-gelir>
                                    <tr class="text-xs">
                                        <td>
                                            <div class="font-medium text-surface-600">{{
                                                getGelirTuruLabel(gelir.gelirTuru)
                                                }}</div>
                                            <div class="text-surface-500 text-xs">{{ gelir.aciklama }}</div>
                                        </td>
                                        <td class="text-right font-bold text-green-600">
                                            {{ gelir.tutar | currency:'TRY':'symbol-narrow':'1.2-2':'tr' }}
                                        </td>
                                        <td class="w-8 text-right">
                                            <p-button icon="pi pi-trash" severity="danger" size="small" [text]="true"
                                                [rounded]="true" (onClick)="gelirSil(gelir.id)">
                                            </p-button>
                                        </td>
                                    </tr>
                                </ng-template>
                            </p-table>

                            <div *ngIf="gelirler.length === 0" class="text-center py-4 text-surface-500">
                                <p class="m-0 text-sm">Gelir yok</p>
                            </div>
                        </div>
                    </div>

                    <!-- Z Raporu Görüntüleme -->
                    <div class="card mt-4">
                        <div class="flex justify-between items-center mb-4">
                            <h5 class="font-semibold m-0 flex items-center text-orange-600">
                                <i class="pi pi-file mr-2"></i> Günlük Z Raporu
                            </h5>
                            <p-button label="Düzenle" icon="pi pi-pencil" size="small" [text]="true" severity="warn"
                                (onClick)="zRaporuDialogAc()"></p-button>
                        </div>

                        <div *ngIf="zRaporu"
                            class="p-4 border rounded-xl bg-orange-50 dark:bg-orange-900/10 border-orange-200 dark:border-orange-800">
                            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                                <div class="flex flex-col">
                                    <span class="text-xs text-surface-500 uppercase font-semibold">Genel
                                        Toplam</span>
                                    <span class="font-bold text-xl text-orange-700">{{ zRaporu.genelToplam |
                                        currency:'TRY':'symbol-narrow':'1.2-2':'tr' }}</span>
                                </div>
                                <div class="flex flex-col">
                                    <span class="text-xs text-surface-500 uppercase font-semibold">KDV Toplam</span>
                                    <span class="font-bold">{{ zRaporu.kdvToplam |
                                        currency:'TRY':'symbol-narrow':'1.2-2':'tr' }}</span>
                                </div>
                                <div class="flex flex-col">
                                    <span class="text-xs text-surface-500 uppercase font-semibold">KDV Hariç</span>
                                    <span class="font-bold">{{ zRaporu.kdvHaricToplam |
                                        currency:'TRY':'symbol-narrow':'1.2-2':'tr' }}</span>
                                </div>
                                <div class="flex flex-col">
                                    <span class="text-xs text-surface-500 uppercase font-semibold">Kayıt
                                        Saati</span>
                                    <span class="font-bold">{{ zRaporu.olusturmaTarihi | date:'HH:mm' }}</span>
                                </div>
                            </div>
                        </div>
                        <div *ngIf="!zRaporu"
                            class="text-center py-8 text-surface-500 bg-surface-50 dark:bg-surface-800 rounded-xl border border-dashed border-surface-300 dark:border-surface-700">
                            <i class="pi pi-info-circle text-2xl mb-2 text-surface-400"></i>
                            <p class="m-0">Henüz Z Raporu girilmemiş.</p>
                            <p-button label="Z Raporu Ekle" icon="pi pi-plus" [text]="true" severity="warn"
                                (onClick)="zRaporuDialogAc()" styleClass="mt-2"></p-button>
                        </div>
                    </div>
                </div>

                <!-- Sağ: Veri Giriş Formu -->
                <div class="col-span-12 lg:col-span-5">
                    <div
                        class="card bg-blue-50 dark:bg-blue-900/10 h-full border-blue-100 dark:border-blue-900/30 border">
                        <div class="flex justify-between items-center mb-4">
                            <h5 class="font-semibold m-0 flex items-center text-blue-700 dark:text-blue-300">
                                <i class="pi pi-user-edit mr-2"></i>
                                {{ personelIslemForm.personelId ? 'Personel Düzenle' : 'Personel Ekle' }}
                            </h5>
                        </div>

                        <div class="flex flex-col gap-4">
                            <!-- Personel Seçimi -->
                            <div class="flex flex-col gap-2">
                                <label class="font-semibold">Personel Seçiniz</label>
                                <p-select [(ngModel)]="personelIslemForm.personelId" [options]="marketPersonelleri"
                                    optionLabel="label" optionValue="value" placeholder="Listeden seçin..."
                                    styleClass="w-full" [filter]="true">
                                </p-select>
                            </div>

                            <p-divider></p-divider>

                            <!-- Sistem Satışı -->
                            <div class="flex flex-col gap-2">
                                <label class="font-semibold text-lg">Sistem Satış Tutarı</label>
                                <p-inputnumber [(ngModel)]="personelIslemForm.sistemSatisTutari" mode="currency"
                                    currency="TRY" locale="tr-TR" styleClass="w-full">
                                </p-inputnumber>
                                <small class="text-surface-500">Otomasyon veya rapordaki satış tutarı</small>
                            </div>

                            <!-- Pusula Girişleri -->
                            <div
                                class="p-3 bg-white dark:bg-surface-900 rounded-lg border border-surface-200 dark:border-surface-700 mt-2">
                                <h6 class="font-semibold mb-3 text-sm text-surface-500 uppercase">Pusula Teslimatı
                                </h6>
                                <div class="grid grid-cols-2 gap-3">
                                    <div class="flex flex-col gap-2">
                                        <label class="font-medium text-sm text-green-600">Nakit</label>
                                        <p-inputnumber [(ngModel)]="personelIslemForm.nakit" mode="currency"
                                            currency="TRY" locale="tr-TR" styleClass="w-full input-sm">
                                        </p-inputnumber>
                                    </div>
                                    <div class="flex flex-col gap-2">
                                        <label class="font-medium text-sm text-blue-600">Kredi Kartı</label>
                                        <p-inputnumber [(ngModel)]="personelIslemForm.krediKarti" mode="currency"
                                            currency="TRY" locale="tr-TR" styleClass="w-full input-sm">
                                        </p-inputnumber>
                                    </div>
                                    <div class="flex flex-col gap-2 col-span-2">
                                        <label class="font-medium text-sm text-orange-600">Gider / Masraf</label>
                                        <div class="p-inputgroup">
                                            <span class="p-inputgroup-addon"><i class="pi pi-minus-circle"></i></span>
                                            <p-inputnumber [(ngModel)]="personelIslemForm.gider" mode="currency"
                                                currency="TRY" locale="tr-TR" styleClass="w-full">
                                            </p-inputnumber>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Anlık Özeti -->
                            <div class="grid grid-cols-2 gap-4 mt-2">
                                <div class="p-2 rounded bg-surface-100 text-center">
                                    <div class="text-xs text-surface-500">Toplam Teslimat</div>
                                    <div class="font-bold text-green-600">{{ getPersonelIslemToplam() |
                                        currency:'TRY':'symbol-narrow':'1.2-2':'tr' }}</div>
                                </div>
                                <div class="p-2 rounded bg-surface-100 text-center"
                                    [ngClass]="{'bg-red-50': getPersonelFark() < 0, 'bg-blue-50': getPersonelFark() > 0}">
                                    <div class="text-xs text-surface-500">Fark</div>
                                    <div class="font-bold"
                                        [ngClass]="{'text-red-500': getPersonelFark() < 0, 'text-blue-500': getPersonelFark() > 0}">
                                        {{ getPersonelFark() | currency:'TRY':'symbol-narrow':'1.2-2':'tr' }}
                                    </div>
                                </div>
                            </div>

                            <p-button [label]="personelIslemForm.personelId ? 'Kaydet / Güncelle' : 'Kaydet'"
                                icon="pi pi-check" (onClick)="personelIslemKaydet()" styleClass="w-full">
                            </p-button>
                        </div>
                    </div>


                </div>

            </div>
        </div>
    </ng-container>
</div>

<p-dialog [(visible)]="zRaporuDialogVisible" [modal]="true" [style]="{width: '450px'}" header="Z Raporu Girişi"
    styleClass="p-fluid">
    <ng-template pTemplate="content">
        <div class="flex flex-col gap-4 pt-4">
            <div class="flex flex-col gap-2">
                <label class="font-semibold">Genel Toplam</label>
                <p-inputnumber [(ngModel)]="zRaporuForm.genelToplam" mode="currency" currency="TRY" locale="tr-TR"
                    styleClass="w-full" [autofocus]="true">
                </p-inputnumber>
            </div>

            <p-divider align="center">
                <span class="text-sm text-surface-500">KDV Dağılımı</span>
            </p-divider>

            <div class="grid grid-cols-3 gap-3">
                <div class="flex flex-col gap-1">
                    <label class="text-sm">KDV %1</label>
                    <p-inputnumber [(ngModel)]="zRaporuForm.kdv1" mode="currency" currency="TRY" locale="tr-TR"
                        styleClass="w-full">
                    </p-inputnumber>
                </div>
                <div class="flex flex-col gap-1">
                    <label class="text-sm">KDV %10</label>
                    <p-inputnumber [(ngModel)]="zRaporuForm.kdv10" mode="currency" currency="TRY" locale="tr-TR"
                        styleClass="w-full">
                    </p-inputnumber>
                </div>
                <div class="flex flex-col gap-1">
                    <label class="text-sm">KDV %20</label>
                    <p-inputnumber [(ngModel)]="zRaporuForm.kdv20" mode="currency" currency="TRY" locale="tr-TR"
                        styleClass="w-full">
                    </p-inputnumber>
                </div>
            </div>

            <div class="bg-blue-50 dark:bg-blue-900/10 p-3 rounded border border-blue-100 dark:border-blue-900/30 mt-2">
                <div class="flex justify-between items-center text-sm">
                    <span class="text-blue-700 dark:text-blue-300">Hesaplanan KDV Toplamı:</span>
                    <span class="font-bold text-blue-700 dark:text-blue-300">{{ getKdvToplam() |
                        currency:'TRY':'symbol-narrow':'1.2-2':'tr' }}</span>
                </div>
                <div class="flex justify-between items-center text-sm mt-1">
                    <span class="text-blue-700 dark:text-blue-300">Matrah (KDV Hariç):</span>
                    <span class="font-bold text-blue-700 dark:text-blue-300">{{ getKdvHaric() |
                        currency:'TRY':'symbol-narrow':'1.2-2':'tr' }}</span>
                </div>
            </div>
        </div>
    </ng-template>
    <ng-template pTemplate="footer">
        <p-button label="İptal" icon="pi pi-times" [text]="true" severity="secondary"
            (onClick)="zRaporuDialogVisible = false"></p-button>
        <p-button label="Kaydet" icon="pi pi-check" severity="warn" (onClick)="zRaporuKaydet()"></p-button>
    </ng-template>
</p-dialog>



<!-- Gider Ekleme Dialog -->
<p-dialog header="Market Gideri Ekle" [(visible)]="giderDialogVisible" [modal]="true" [style]="{width: '400px'}">

    <div class="flex flex-col gap-4">
        <div class="flex flex-col gap-2">
            <label class="font-semibold">Gider Türü</label>
            <p-select [(ngModel)]="giderForm.giderTuru" [options]="giderTurleri" optionLabel="label" optionValue="value"
                placeholder="Gider Türü Seçin" styleClass="w-full">
            </p-select>
        </div>
        <div class="flex flex-col gap-2">
            <label class="font-semibold">Tutar</label>
            <p-inputnumber [(ngModel)]="giderForm.tutar" mode="currency" currency="TRY" locale="tr-TR"
                styleClass="w-full">
            </p-inputnumber>
        </div>
        <div class="flex flex-col gap-2">
            <label class="font-semibold">Açıklama</label>
            <textarea pTextarea [(ngModel)]="giderForm.aciklama" rows="2" placeholder="Açıklama girin..."
                class="w-full">
            </textarea>
        </div>
    </div>

    <ng-template pTemplate="footer">
        <p-button label="İptal" icon="pi pi-times" severity="secondary"
            (onClick)="giderDialogVisible = false"></p-button>
        <p-button label="Ekle" icon="pi pi-check" severity="success" (onClick)="giderEkle()"></p-button>
    </ng-template>
</p-dialog>

<!-- Gelir Ekleme Dialog -->
<p-dialog header="Market Geliri Ekle" [(visible)]="gelirDialogVisible" [modal]="true" [style]="{width: '400px'}">

    <div class="flex flex-col gap-4">
        <div class="flex flex-col gap-2">
            <label class="font-semibold">Gelir Türü</label>
            <p-select [(ngModel)]="gelirForm.gelirTuru" [options]="gelirTurleri" optionLabel="label" optionValue="value"
                placeholder="Gelir Türü Seçin" styleClass="w-full">
            </p-select>
        </div>
        <div class="flex flex-col gap-2">
            <label class="font-semibold">Tutar</label>
            <p-inputnumber [(ngModel)]="gelirForm.tutar" mode="currency" currency="TRY" locale="tr-TR"
                styleClass="w-full">
            </p-inputnumber>
        </div>
        <div class="flex flex-col gap-2">
            <label class="font-semibold">Açıklama</label>
            <textarea pTextarea [(ngModel)]="gelirForm.aciklama" rows="2" placeholder="Açıklama girin..."
                class="w-full">
            </textarea>
        </div>
    </div>

    <ng-template pTemplate="footer">
        <p-button label="İptal" icon="pi pi-times" severity="secondary"
            (onClick)="gelirDialogVisible = false"></p-button>
        <p-button label="Ekle" icon="pi pi-check" severity="success" (onClick)="gelirEkle()"></p-button>
    </ng-template>
</p-dialog>