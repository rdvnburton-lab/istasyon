<p-toast></p-toast>
<p-confirmDialog></p-confirmDialog>

<div class="grid grid-cols-12 gap-6">
    <ng-container *ngIf="!seciliMarketVardiya">
        <!-- Üst: Yeni Gün Açma -->
        <div class="col-span-12">
            <div class="card">
                <h5 class="font-semibold mb-4 flex items-center">
                    <i class="pi pi-calendar-plus mr-2 text-primary-500"></i>
                    Yeni Günlük Vardiya Aç
                </h5>
                <div class="flex items-end gap-4">
                    <div class="flex flex-col gap-2 w-full md:w-1/3">
                        <label class="font-semibold">Tarih</label>
                        <p-datepicker [(ngModel)]="yeniVardiyaForm.tarih" dateFormat="dd.mm.yy" [showIcon]="true"
                            iconDisplay="input" styleClass="w-full">
                        </p-datepicker>
                    </div>

                    <div class="w-full md:w-auto">
                        <p-button label="Günlüğü Başlat" icon="pi pi-check" (onClick)="yeniVardiyaEkle()"
                            styleClass="w-full md:w-auto">
                        </p-button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Orta: Günlük Vardiya Listesi -->
        <div class="col-span-12">
            <div class="card">
                <h5 class="font-semibold mb-4 flex items-center">
                    <i class="pi pi-list mr-2 text-blue-500"></i>
                    Market Günlük Vardiya Listesi
                </h5>

                <p-table [value]="marketVardiyalar" styleClass="p-datatable-gridlines p-datatable-sm" [rowHover]="true">
                    <ng-template pTemplate="header">
                        <tr>
                            <th style="width: 120px">Tarih</th>
                            <th class="text-right">Top. Sistem Satış</th>
                            <th class="text-right">Top. Teslimat</th>
                            <th class="text-right">Günlük Fark</th>
                            <th style="width: 100px">Durum</th>
                            <th style="width: 250px">İşlem</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-vardiya>
                        <tr [ngClass]="{'bg-blue-50 dark:bg-blue-900/20': isVardiyaSecili(vardiya)}">
                            <td>{{ vardiya.tarih | date:'dd.MM.yyyy' }}</td>
                            <td class="text-right font-semibold">{{ vardiya.toplamSatisTutari |
                                currency:'TRY':'symbol-narrow':'1.2-2':'tr' }}</td>
                            <td class="text-right text-green-600">{{ vardiya.toplamTeslimatTutari |
                                currency:'TRY':'symbol-narrow':'1.2-2':'tr' }}</td>
                            <td class="text-right font-bold"
                                [ngClass]="{'text-red-500': vardiya.toplamFark < 0, 'text-blue-500': vardiya.toplamFark > 0}">
                                {{ vardiya.toplamFark | currency:'TRY':'symbol-narrow':'1.2-2':'tr' }}
                            </td>
                            <td>
                                <p-tag [value]="getDurumLabel(vardiya.durum)"
                                    [severity]="getDurumSeverity(vardiya.durum)"></p-tag>
                            </td>
                            <td>
                                <div class="flex gap-2">
                                    <p-button label="İşlem Yap" icon="pi pi-search" size="small" [text]="true"
                                        (onClick)="vardiyaSec(vardiya)"></p-button>

                                    <ng-container
                                        *ngIf="vardiya.durum === 'ONAY_BEKLIYOR' && (currentUser?.role === 'PATRON' || currentUser?.role === 'YONETICI')">
                                        <p-button label="Onayla" icon="pi pi-check" severity="success" size="small"
                                            [text]="true" (onClick)="onayla(vardiya)"></p-button>
                                        <p-button label="Reddet" icon="pi pi-times" severity="danger" size="small"
                                            [text]="true" (onClick)="reddetDialogAc(vardiya)"></p-button>
                                    </ng-container>
                                </div>
                            </td>
                        </tr>
                    </ng-template>
                </p-table>
            </div>
        </div>
    </ng-container>

    <ng-container *ngIf="seciliMarketVardiya">
        <!-- Başlık -->
        <div class="col-span-12">
            <div
                class="flex items-center gap-3 p-4 bg-surface-100 dark:bg-surface-800 rounded-xl border border-surface-200 dark:border-surface-700">

                <p-button icon="pi pi-arrow-left" [text]="true" [rounded]="true" severity="secondary"
                    pTooltip="Listeye Dön" tooltipPosition="bottom" (onClick)="listeyeDon()">
                </p-button>
                <div class="h-8 w-px bg-surface-300 dark:bg-surface-600 mx-1"></div>

                <i class="pi pi-calendar text-2xl text-primary-500"></i>
                <div>
                    <h3 class="text-lg font-bold m-0 my-5">
                        {{ seciliMarketVardiya.tarih | date:'dd.MM.yyyy' }} - Personel İşlemleri
                    </h3>
                    <span class="text-[var(--text-color-secondary)] text-sm">
                        Market Personel Satış ve Teslimat Girişi
                    </span>
                </div>

                <div class="ml-auto flex gap-2">
                    <p-button *ngIf="seciliMarketVardiya.durum === 'ACIK' || seciliMarketVardiya.durum === 'REDDEDILDI'"
                        label="Onaya Gönder" icon="pi pi-send" severity="help"
                        (onClick)="mutabakatGonder(seciliMarketVardiya)">
                    </p-button>

                    <ng-container
                        *ngIf="seciliMarketVardiya.durum === 'ONAY_BEKLIYOR' && (currentUser?.role === 'PATRON' || currentUser?.role === 'YONETICI')">
                        <p-button label="Onayla" icon="pi pi-check" severity="success"
                            (onClick)="onayla(seciliMarketVardiya)"></p-button>
                        <p-button label="Reddet" icon="pi pi-times" severity="danger"
                            (onClick)="reddetDialogAc(seciliMarketVardiya)"></p-button>
                    </ng-container>
                </div>
            </div>
        </div>

        <!-- Sol: Personel Listesi -->
        <div class="col-span-12 lg:col-span-7">
            <div class="card">
                <h5 class="font-semibold mb-4 text-blue-600">
                    <i class="pi pi-users mr-2"></i> Vardiya Personel Listesi
                </h5>

                <p-table [value]="yonetilenPersoneller" styleClass="p-datatable-sm" [rowHover]="true">
                    <ng-template pTemplate="header">
                        <tr>
                            <th>Personel</th>
                            <th class="text-right">Sistem Satış</th>
                            <th class="text-right">Teslimat</th>
                            <th class="text-right">Fark</th>
                            <th style="width: 50px"></th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-personel>
                        <tr>
                            <td class="font-medium">{{ personel.personelAdi }}</td>
                            <td class="text-right">{{ personel.sistemSatisTutari |
                                currency:'TRY':'symbol-narrow':'1.2-2':'tr' }}</td>
                            <td class="text-right text-green-600">{{ personel.toplamTeslimat |
                                currency:'TRY':'symbol-narrow':'1.2-2':'tr' }}</td>
                            <td class="text-right font-bold"
                                [ngClass]="{'text-red-500': personel.fark < 0, 'text-blue-500': personel.fark > 0}">
                                {{ personel.fark | currency:'TRY':'symbol-narrow':'1.2-2':'tr' }}
                            </td>
                            <td>
                                <p-button
                                    *ngIf="seciliMarketVardiya.durum === 'ACIK' || seciliMarketVardiya.durum === 'REDDEDILDI'"
                                    icon="pi pi-pencil" [text]="true" severity="secondary"
                                    (onClick)="personelDuzenle(personel)">
                                </p-button>
                            </td>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="emptymessage">
                        <tr>
                            <td colspan="5" class="text-center py-4 text-[var(--text-color-secondary)]">
                                Henüz personel verisi girilmemiş.
                            </td>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="footer">
                        <tr class="bg-surface-50 font-bold">
                            <td>TOPLAM</td>
                            <td class="text-right">{{ seciliMarketVardiya.toplamSatisTutari |
                                currency:'TRY':'symbol-narrow':'1.2-2':'tr' }}</td>
                            <td class="text-right text-green-600">{{
                                seciliMarketVardiya.toplamTeslimatTutari |
                                currency:'TRY':'symbol-narrow':'1.2-2':'tr' }}</td>
                            <td class="text-right"
                                [ngClass]="{'text-red-500': (seciliMarketVardiya.toplamFark||0) < 0}">
                                {{ seciliMarketVardiya.toplamFark |
                                currency:'TRY':'symbol-narrow':'1.2-2':'tr'
                                }}
                            </td>
                            <td></td>
                        </tr>
                    </ng-template>
                </p-table>
            </div>

            <!-- Gider ve Gelirler -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                <!-- Market Giderleri -->
                <div
                    class="card h-full bg-orange-50 dark:bg-orange-900/10 border-orange-100 dark:border-orange-900/30 border">
                    <div class="flex justify-between items-center mb-4">
                        <h5 class="font-semibold m-0 flex items-center text-orange-700 dark:text-orange-300">
                            <i class="pi pi-shopping-cart mr-2"></i>Giderler
                        </h5>
                        <div class="flex items-center gap-2">
                            <span class="font-bold text-orange-600 text-sm" *ngIf="giderler.length > 0">
                                {{ getGiderToplam() | currency:'TRY':'symbol-narrow':'1.2-2':'tr' }}
                            </span>
                            <p-button
                                *ngIf="seciliMarketVardiya.durum === 'ACIK' || seciliMarketVardiya.durum === 'REDDEDILDI'"
                                icon="pi pi-plus" severity="warn" size="small" [rounded]="true" [text]="true"
                                (onClick)="giderDialogAc()">
                            </p-button>
                        </div>
                    </div>

                    <p-table [value]="giderler" styleClass="p-datatable-sm bg-transparent" [rowHover]="true"
                        *ngIf="giderler.length > 0">
                        <ng-template pTemplate="body" let-gider>
                            <tr class="text-xs">
                                <td>
                                    <div class="font-medium text-[var(--text-color-secondary)]">{{
                                        getGiderTuruLabel(gider.giderTuru)
                                        }}</div>
                                    <div class="text-[var(--text-color-secondary)] text-xs">{{ gider.aciklama }}</div>
                                </td>
                                <td class="text-right font-bold text-orange-600">
                                    {{ gider.tutar | currency:'TRY':'symbol-narrow':'1.2-2':'tr' }}
                                </td>
                                <td class="w-8 text-right">
                                    <p-button
                                        *ngIf="seciliMarketVardiya.durum === 'ACIK' || seciliMarketVardiya.durum === 'REDDEDILDI'"
                                        icon="pi pi-trash" severity="danger" size="small" [text]="true" [rounded]="true"
                                        (onClick)="giderSil(gider.id)">
                                    </p-button>
                                </td>
                            </tr>
                        </ng-template>
                    </p-table>

                    <div *ngIf="giderler.length === 0" class="text-center py-4 text-[var(--text-color-secondary)]">
                        <p class="m-0 text-sm">Gider yok</p>
                    </div>
                </div>

                <!-- Market Gelirleri -->
                <div
                    class="card h-full bg-green-50 dark:bg-green-900/10 border-green-100 dark:border-green-900/30 border">
                    <div class="flex justify-between items-center mb-4">
                        <h5 class="font-semibold m-0 flex items-center text-green-700 dark:text-green-300">
                            <i class="pi pi-money-bill mr-2"></i>Gelirler
                        </h5>
                        <div class="flex items-center gap-2">
                            <span class="font-bold text-green-600 text-sm" *ngIf="gelirler.length > 0">
                                {{ getGelirToplam() | currency:'TRY':'symbol-narrow':'1.2-2':'tr' }}
                            </span>
                            <p-button
                                *ngIf="seciliMarketVardiya.durum === 'ACIK' || seciliMarketVardiya.durum === 'REDDEDILDI'"
                                icon="pi pi-plus" severity="success" size="small" [rounded]="true" [text]="true"
                                (onClick)="gelirDialogAc()">
                            </p-button>
                        </div>
                    </div>

                    <p-table [value]="gelirler" styleClass="p-datatable-sm bg-transparent" [rowHover]="true"
                        *ngIf="gelirler.length > 0">
                        <ng-template pTemplate="body" let-gelir>
                            <tr class="text-xs">
                                <td>
                                    <div class="font-medium text-[var(--text-color-secondary)]">{{
                                        getGelirTuruLabel(gelir.gelirTuru)
                                        }}</div>
                                    <div class="text-[var(--text-color-secondary)] text-xs">{{ gelir.aciklama }}</div>
                                </td>
                                <td class="text-right font-bold text-green-600">
                                    {{ gelir.tutar | currency:'TRY':'symbol-narrow':'1.2-2':'tr' }}
                                </td>
                                <td class="w-8 text-right">
                                    <p-button
                                        *ngIf="seciliMarketVardiya.durum === 'ACIK' || seciliMarketVardiya.durum === 'REDDEDILDI'"
                                        icon="pi pi-trash" severity="danger" size="small" [text]="true" [rounded]="true"
                                        (onClick)="gelirSil(gelir.id)">
                                    </p-button>
                                </td>
                            </tr>
                        </ng-template>
                    </p-table>

                    <div *ngIf="gelirler.length === 0" class="text-center py-4 text-[var(--text-color-secondary)]">
                        <p class="m-0 text-sm">Gelir yok</p>
                    </div>
                </div>
            </div>

            <!-- Z Raporu Görüntüleme -->
            <div class="card mt-4">
                <div class="flex justify-between items-center mb-4">
                    <h5 class="font-semibold m-0 flex items-center text-orange-600">
                        <i class="pi pi-file mr-2"></i> Günlük Z Raporu
                    </h5>
                    <p-button *ngIf="seciliMarketVardiya.durum === 'ACIK' || seciliMarketVardiya.durum === 'REDDEDILDI'"
                        label="Düzenle" icon="pi pi-pencil" size="small" [text]="true" severity="warn"
                        (onClick)="zRaporuDialogAc()"></p-button>
                </div>

                <div *ngIf="zRaporu"
                    class="p-4 border rounded-xl bg-orange-500/10 dark:bg-orange-900/10 border-orange-200 dark:border-orange-800/30">
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                        <div class="flex flex-col">
                            <span class="text-xs text-[var(--text-color-secondary)] uppercase font-semibold">Genel
                                Toplam</span>
                            <span class="font-bold text-xl text-orange-700">{{ zRaporu.genelToplam |
                                currency:'TRY':'symbol-narrow':'1.2-2':'tr' }}</span>
                        </div>
                        <div class="flex flex-col">
                            <span class="text-xs text-[var(--text-color-secondary)] uppercase font-semibold">KDV
                                Toplam</span>
                            <span class="font-bold">{{ zRaporu.kdvToplam |
                                currency:'TRY':'symbol-narrow':'1.2-2':'tr' }}</span>
                        </div>
                        <div class="flex flex-col">
                            <span class="text-xs text-[var(--text-color-secondary)] uppercase font-semibold">KDV
                                Hariç</span>
                            <span class="font-bold">{{ zRaporu.kdvHaricToplam |
                                currency:'TRY':'symbol-narrow':'1.2-2':'tr' }}</span>
                        </div>
                        <div class="flex flex-col">
                            <span class="text-xs text-[var(--text-color-secondary)] uppercase font-semibold">Kayıt
                                Saati</span>
                            <span class="font-bold">{{ zRaporu.olusturmaTarihi | date:'HH:mm' }}</span>
                        </div>
                    </div>
                </div>
                <div *ngIf="!zRaporu"
                    class="text-center py-8 text-[var(--text-color-secondary)] bg-surface-100/10 dark:bg-surface-800 rounded-xl border border-dashed border-surface-300 dark:border-surface-700">
                    <i class="pi pi-info-circle text-2xl mb-2 text-surface-400"></i>
                    <p class="m-0">Henüz Z Raporu girilmemiş.</p>
                    <p-button *ngIf="seciliMarketVardiya.durum === 'ACIK' || seciliMarketVardiya.durum === 'REDDEDILDI'"
                        label="Z Raporu Ekle" icon="pi pi-plus" [text]="true" severity="warn"
                        (onClick)="zRaporuDialogAc()" styleClass="mt-2"></p-button>
                </div>
            </div>
        </div>

        <!-- Sağ: Veri Giriş Formu -->
        <div class="col-span-12 lg:col-span-5">
            <div class="card bg-blue-500/10 dark:bg-blue-900/20 h-full border-blue-200 dark:border-blue-800/30 border">
                <div class="flex justify-between items-center mb-4">
                    <h5 class="font-semibold m-0 flex items-center text-blue-700 dark:text-blue-300">
                        <i class="pi pi-user-edit mr-2"></i>
                        Pusula Girişi
                    </h5>
                </div>

                <div *ngIf="seciliMarketVardiya.durum === 'ACIK' || seciliMarketVardiya.durum === 'REDDEDILDI'"
                    class="flex flex-col gap-4">
                    <!-- Personel Seçimi -->
                    <div class="flex flex-col gap-2">
                        <label class="font-semibold">Personel Seçiniz</label>
                        <p-select [(ngModel)]="personelIslemForm.personelId" [options]="marketPersonelleri"
                            optionLabel="label" optionValue="value" placeholder="Listeden seçin..." styleClass="w-full"
                            [filter]="true">
                        </p-select>
                    </div>

                    <p-divider></p-divider>

                    <!-- Sistem Satışı -->
                    <div class="flex flex-col gap-2">
                        <label class="font-semibold text-lg">Sistem Satış Tutarı</label>
                        <p-inputnumber [(ngModel)]="personelIslemForm.sistemSatisTutari" mode="currency" currency="TRY"
                            locale="tr-TR" styleClass="w-full">
                        </p-inputnumber>
                        <small class="text-[var(--text-color-secondary)]">Otomasyon veya rapordaki satış tutarı</small>
                    </div>

                    <!-- Pusula Girişleri -->
                    <div
                        class="p-3 bg-[var(--surface-card)] dark:bg-surface-900 rounded-lg border border-surface-200 dark:border-surface-700 mt-2">
                        <h6 class="font-semibold mb-3 text-sm text-[var(--text-color-secondary)] uppercase">Pusula
                            Teslimatı
                        </h6>
                        <div class="grid grid-cols-2 gap-3">
                            <div class="flex flex-col gap-2">
                                <label class="font-medium text-sm text-green-600">Nakit</label>
                                <p-inputnumber [(ngModel)]="personelIslemForm.nakit" mode="currency" currency="TRY"
                                    locale="tr-TR" styleClass="w-full input-sm">
                                </p-inputnumber>
                            </div>
                            <div class="flex flex-col gap-2">
                                <label class="font-medium text-sm text-blue-600">Kredi Kartı</label>
                                <p-inputnumber [(ngModel)]="personelIslemForm.krediKarti" mode="currency" currency="TRY"
                                    locale="tr-TR" styleClass="w-full input-sm">
                                </p-inputnumber>
                            </div>
                            <div class="flex flex-col gap-2 col-span-2">
                                <label class="font-medium text-sm text-orange-600">Gider /
                                    Masraf</label>
                                <div class="p-inputgroup">
                                    <span class="p-inputgroup-addon"><i class="pi pi-minus-circle"></i></span>
                                    <p-inputnumber [(ngModel)]="personelIslemForm.gider" mode="currency" currency="TRY"
                                        locale="tr-TR" styleClass="w-full">
                                    </p-inputnumber>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Anlık Özeti -->
                    <div class="grid grid-cols-2 gap-4 mt-2">
                        <div class="p-2 rounded bg-surface-100 text-center">
                            <div class="text-xs text-[var(--text-color-secondary)]">Toplam Teslimat</div>
                            <div class="font-bold text-green-600">{{ getPersonelIslemToplam() |
                                currency:'TRY':'symbol-narrow':'1.2-2':'tr' }}</div>
                        </div>
                        <div class="p-2 rounded bg-surface-100 text-center"
                            [ngClass]="{'bg-red-50': getPersonelFark() < 0, 'bg-blue-50': getPersonelFark() > 0}">
                            <div class="text-xs text-[var(--text-color-secondary)]">Fark</div>
                            <div class="font-bold"
                                [ngClass]="{'text-red-500': getPersonelFark() < 0, 'text-blue-500': getPersonelFark() > 0}">
                                {{ getPersonelFark() | currency:'TRY':'symbol-narrow':'1.2-2':'tr' }}
                            </div>
                        </div>
                    </div>

                    <p-button [label]="personelIslemForm.personelId ? 'Kaydet / Güncelle' : 'Kaydet'" icon="pi pi-check"
                        (onClick)="personelIslemKaydet()" styleClass="w-full">
                    </p-button>
                </div>

                <div *ngIf="seciliMarketVardiya.durum !== 'ACIK' && seciliMarketVardiya.durum !== 'REDDEDILDI'"
                    class="p-8 text-center bg-surface-50 dark:bg-surface-800 rounded-xl border border-dashed border-surface-300 dark:border-surface-700">
                    <i class="pi pi-lock text-4xl mb-4 text-surface-400"></i>
                    <h6 class="font-bold text-surface-700 dark:text-surface-300 mb-2">Mutabakat Kilitli
                    </h6>
                    <p class="text-[var(--text-color-secondary)] text-sm m-0">
                        Bu mutabakat onaya gönderildiği veya onaylandığı için üzerinde değişiklik
                        yapılamaz.
                    </p>
                </div>
            </div>
        </div>
    </ng-container>
</div>

<p-dialog [(visible)]="zRaporuDialogVisible" [modal]="true" [style]="{width: '450px'}" header="Z Raporu Girişi"
    styleClass="p-fluid">
    <ng-template pTemplate="content">
        <div class="flex flex-col gap-4 pt-4">
            <div class="flex flex-col gap-2">
                <label class="font-semibold">Genel Toplam</label>
                <p-inputnumber [(ngModel)]="zRaporuForm.genelToplam" mode="currency" currency="TRY" locale="tr-TR"
                    styleClass="w-full" [autofocus]="true">
                </p-inputnumber>
            </div>

            <p-divider align="center">
                <span class="text-sm text-[var(--text-color-secondary)]">KDV Dağılımı</span>
            </p-divider>

            <div class="grid grid-cols-3 gap-3">
                <div class="flex flex-col gap-1">
                    <label class="text-sm">KDV %1</label>
                    <p-inputnumber [(ngModel)]="zRaporuForm.kdv1" mode="currency" currency="TRY" locale="tr-TR"
                        styleClass="w-full">
                    </p-inputnumber>
                </div>
                <div class="flex flex-col gap-1">
                    <label class="text-sm">KDV %10</label>
                    <p-inputnumber [(ngModel)]="zRaporuForm.kdv10" mode="currency" currency="TRY" locale="tr-TR"
                        styleClass="w-full">
                    </p-inputnumber>
                </div>
                <div class="flex flex-col gap-1">
                    <label class="text-sm">KDV %20</label>
                    <p-inputnumber [(ngModel)]="zRaporuForm.kdv20" mode="currency" currency="TRY" locale="tr-TR"
                        styleClass="w-full">
                    </p-inputnumber>
                </div>
            </div>
        </div>
    </ng-template>
    <ng-template pTemplate="footer">
        <p-button label="İptal" icon="pi pi-times" [text]="true" (onClick)="zRaporuDialogVisible = false"></p-button>
        <p-button label="Kaydet" icon="pi pi-check" (onClick)="zRaporuKaydet()"></p-button>
    </ng-template>
</p-dialog>

<p-dialog [(visible)]="giderDialogVisible" [modal]="true" [style]="{width: '450px'}" header="Gider Ekle"
    styleClass="p-fluid">
    <ng-template pTemplate="content">
        <div class="flex flex-col gap-4 pt-4">
            <div class="flex flex-col gap-2">
                <label class="font-semibold">Gider Türü</label>
                <p-select [(ngModel)]="giderForm.giderTuru" [options]="giderTurleri" optionLabel="label"
                    optionValue="value" placeholder="Seçiniz" styleClass="w-full">
                </p-select>
            </div>
            <div class="flex flex-col gap-2">
                <label class="font-semibold">Tutar</label>
                <p-inputnumber [(ngModel)]="giderForm.tutar" mode="currency" currency="TRY" locale="tr-TR"
                    styleClass="w-full">
                </p-inputnumber>
            </div>
            <div class="flex flex-col gap-2">
                <label class="font-semibold">Açıklama</label>
                <input pInputText [(ngModel)]="giderForm.aciklama" class="w-full" />
            </div>
        </div>
    </ng-template>
    <ng-template pTemplate="footer">
        <p-button label="İptal" icon="pi pi-times" [text]="true" (onClick)="giderDialogVisible = false"></p-button>
        <p-button label="Ekle" icon="pi pi-check" (onClick)="giderEkle()"></p-button>
    </ng-template>
</p-dialog>

<p-dialog [(visible)]="gelirDialogVisible" [modal]="true" [style]="{width: '450px'}" header="Gelir Ekle"
    styleClass="p-fluid">
    <ng-template pTemplate="content">
        <div class="flex flex-col gap-4 pt-4">
            <div class="flex flex-col gap-2">
                <label class="font-semibold">Gelir Türü</label>
                <p-select [(ngModel)]="gelirForm.gelirTuru" [options]="gelirTurleri" optionLabel="label"
                    optionValue="value" placeholder="Seçiniz" styleClass="w-full">
                </p-select>
            </div>
            <div class="flex flex-col gap-2">
                <label class="font-semibold">Tutar</label>
                <p-inputnumber [(ngModel)]="gelirForm.tutar" mode="currency" currency="TRY" locale="tr-TR"
                    styleClass="w-full">
                </p-inputnumber>
            </div>
            <div class="flex flex-col gap-2">
                <label class="font-semibold">Açıklama</label>
                <input pInputText [(ngModel)]="gelirForm.aciklama" class="w-full" />
            </div>
        </div>
    </ng-template>
    <ng-template pTemplate="footer">
        <p-button label="İptal" icon="pi pi-times" [text]="true" (onClick)="gelirDialogVisible = false"></p-button>
        <p-button label="Ekle" icon="pi pi-check" (onClick)="gelirEkle()"></p-button>
    </ng-template>
</p-dialog>

<p-dialog [(visible)]="redDialogVisible" [modal]="true" [style]="{width: '450px'}" header="Vardiya Reddetme"
    styleClass="p-fluid">
    <ng-template pTemplate="content">
        <div class="flex flex-col gap-4 pt-4">
            <div class="flex flex-col gap-2">
                <label class="font-semibold">Ret Nedeni</label>
                <textarea pTextarea [(ngModel)]="redNedeni" rows="5" class="w-full"
                    placeholder="Lütfen ret nedenini açıklayınız..."></textarea>
            </div>
        </div>
    </ng-template>
    <ng-template pTemplate="footer">
        <p-button label="İptal" icon="pi pi-times" [text]="true" (onClick)="redDialogVisible = false"></p-button>
        <p-button label="Reddet" icon="pi pi-check" severity="danger" (onClick)="reddetOnayla()"></p-button>
    </ng-template>
</p-dialog>