<div class="card">
    <p-toast></p-toast>
    <p-toolbar styleClass="mb-4 gap-2">
        <ng-template pTemplate="left">
            <p-button label="Yeni İstasyon" icon="pi pi-plus" severity="success" (onClick)="yeniEkle()"></p-button>
        </ng-template>
    </p-toolbar>

    <p-table [value]="istasyonlar" [rows]="10" [paginator]="true" [rowHover]="true" styleClass="p-datatable-sm"
        [tableStyle]="{'min-width': '50rem'}">
        <ng-template pTemplate="caption">
            <div class="flex align-items-center justify-content-between">
                <h5 class="m-0">İstasyon Tanımları</h5>
            </div>
        </ng-template>
        <ng-template pTemplate="header">
            <tr>
                <th>Ad</th>
                <th>Kod</th>
                <th>Adres</th>
                <th class="text-center">Pompa Sayısı</th>
                <th class="text-center">Market</th>
                <th class="text-center">Durum</th>
                <th></th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-istasyon>
            <tr>
                <td>{{istasyon.ad}}</td>
                <td>{{istasyon.kod}}</td>
                <td>{{istasyon.adres}}</td>
                <td class="text-center">{{istasyon.pompaSayisi}}</td>
                <td class="text-center">
                    <i class="pi"
                        [ngClass]="{'true-icon pi-check-circle text-green-500': istasyon.marketVar, 'false-icon pi-times-circle text-red-500': !istasyon.marketVar}"></i>
                </td>
                <td class="text-center">
                    <p-tag [value]="istasyon.aktif ? 'Aktif' : 'Pasif'"
                        [severity]="istasyon.aktif ? 'success' : 'danger'"></p-tag>
                </td>
                <td>
                    <p-button icon="pi pi-pencil" [rounded]="true" [text]="true" severity="success"
                        (onClick)="duzenle(istasyon)"></p-button>
                    <p-button icon="pi pi-trash" [rounded]="true" [text]="true" severity="danger"
                        (onClick)="sil(istasyon)"></p-button>
                </td>
            </tr>
        </ng-template>
        <ng-template pTemplate="summary">
            <div class="flex align-items-center justify-content-between">
                Toplam {{istasyonlar ? istasyonlar.length : 0}} istasyon var.
            </div>
        </ng-template>
    </p-table>
</div>

<p-dialog [(visible)]="istasyonDialog" [style]="{width: '450px'}" header="İstasyon Detayı" [modal]="true"
    styleClass="p-fluid">
    <ng-template pTemplate="content">
        <div class="field mb-4">
            <label for="ad">İstasyon Adı</label>
            <input type="text" pInputText id="ad" [(ngModel)]="istasyon.ad" required autofocus />
            <small class="p-error" *ngIf="submitted && !istasyon.ad">Ad alanı zorunludur.</small>
        </div>
        <div class="field mb-4">
            <label for="kod">İstasyon Kodu</label>
            <input type="text" pInputText id="kod" [(ngModel)]="istasyon.kod" />
        </div>
        <div class="field mb-4">
            <label for="adres">Adres</label>
            <textarea id="adres" pInputTextarea [(ngModel)]="istasyon.adres" required rows="3" cols="20"
                class="w-full border p-2 rounded"></textarea>
        </div>

        <div class="formgrid grid grid-cols-2 gap-4">
            <div class="field mb-4 col">
                <label for="pompaSayisi" class="block mb-2">Pompa Sayısı</label>
                <p-inputNumber id="pompaSayisi" [(ngModel)]="istasyon.pompaSayisi"></p-inputNumber>
            </div>
            <div class="field mb-4 col flex items-center mt-6">
                <div class="field-checkbox">
                    <p-checkbox [(ngModel)]="istasyon.marketVar" [binary]="true" inputId="marketVar"></p-checkbox>
                    <label for="marketVar" class="ml-2">Market Var</label>
                </div>
            </div>
        </div>

        <div class="field-checkbox mb-4">
            <p-checkbox [(ngModel)]="istasyon.aktif" [binary]="true" inputId="aktif"></p-checkbox>
            <label for="aktif" class="ml-2">Aktif</label>
        </div>
    </ng-template>

    <ng-template pTemplate="footer">
        <p-button label="İptal" icon="pi pi-times" [text]="true" (onClick)="dialogKapat()"></p-button>
        <p-button label="Kaydet" icon="pi pi-check" [text]="true" (onClick)="kaydet()"></p-button>
    </ng-template>
</p-dialog>

<p-confirmDialog [style]="{width: '450px'}"></p-confirmDialog>